(function(){var b=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1},a=[].slice;(function(a,b){return"function"==typeof define&&define.amd?define("waypoints",["jquery"],function(c){return b(c,a)}):b(a.jQuery,a)})(window,function(j,k){var e,n,q,x,r,z,A,B,C,D,E,F,G,H,I,J;return e=j(k),B=0<=b.call(k,"ontouchstart"),x={horizontal:{},vertical:{}},r=1,A={},z="waypoints-context-id",E="resize.waypoints",F="scroll.waypoints",G=1,H="waypoints-waypoint-ids",I="waypoint",J="waypoints",n=function(){function a(a){var b=this;this.$element=a,this.element=a[0],this.didResize=!1,this.didScroll=!1,this.id="context"+r++,this.oldScroll={x:a.scrollLeft(),y:a.scrollTop()},this.waypoints={horizontal:{},vertical:{}},this.element[z]=this.id,A[this.id]=this,a.bind(F,function(){var a;if(!(b.didScroll||B))return b.didScroll=!0,a=function(){return b.doScroll(),b.didScroll=!1},k.setTimeout(a,j[J].settings.scrollThrottle)}),a.bind(E,function(){var a;if(!b.didResize)return b.didResize=!0,a=function(){return j[J]("refresh"),b.didResize=!1},k.setTimeout(a,j[J].settings.resizeThrottle)})}return a.prototype.doScroll=function(){var a,b=this;return a={horizontal:{newScroll:this.$element.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.$element.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}},!B||a.vertical.oldScroll&&a.vertical.newScroll||j[J]("refresh"),j.each(a,function(a,c){var d,e,f;return f=[],e=c.newScroll>c.oldScroll,d=e?c.forward:c.backward,j.each(b.waypoints[a],function(a,b){var d,e;return c.oldScroll<(d=b.offset)&&d<=c.newScroll?f.push(b):c.newScroll<(e=b.offset)&&e<=c.oldScroll?f.push(b):void 0}),f.sort(function(a,b){return a.offset-b.offset}),e||f.reverse(),j.each(f,function(a,b){if(b.options.continuous||a===f.length-1)return b.trigger([d])})}),this.oldScroll={x:a.horizontal.newScroll,y:a.vertical.newScroll}},a.prototype.refresh=function(){var a,b,c,d=this;return c=j.isWindow(this.element),b=this.$element.offset(),this.doScroll(),a={horizontal:{contextOffset:c?0:b.left,contextScroll:c?0:this.oldScroll.x,contextDimension:this.$element.width(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:c?0:b.top,contextScroll:c?0:this.oldScroll.y,contextDimension:c?j[J]("viewportHeight"):this.$element.height(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}},j.each(a,function(a,b){return j.each(d.waypoints[a],function(a,c){var d,e,g,h,k;if(d=c.options.offset,g=c.offset,e=j.isWindow(c.element)?0:c.$element.offset()[b.offsetProp],j.isFunction(d)?d=d.apply(c.element):"string"==typeof d&&(d=parseFloat(d),-1<c.options.offset.indexOf("%")&&(d=Math.ceil(b.contextDimension*d/100))),c.offset=e-b.contextOffset+b.contextScroll-d,(!c.options.onlyOnScroll||null==g)&&c.enabled)return null!==g&&g<(h=b.oldScroll)&&h<=c.offset?c.trigger([b.backward]):null!==g&&g>(k=b.oldScroll)&&k>=c.offset?c.trigger([b.forward]):null===g&&b.oldScroll>=c.offset?c.trigger([b.forward]):void 0})})},a.prototype.checkEmpty=function(){if(j.isEmptyObject(this.waypoints.horizontal)&&j.isEmptyObject(this.waypoints.vertical))return this.$element.unbind([E,F].join(" ")),delete A[this.id]},a}(),q=function(){function a(a,b,c){var d,e;"bottom-in-view"===c.offset&&(c.offset=function(){var a;return a=j[J]("viewportHeight"),j.isWindow(b.element)||(a=b.$element.height()),a-j(this).outerHeight()}),this.$element=a,this.element=a[0],this.axis=c.horizontal?"horizontal":"vertical",this.callback=c.handler,this.context=b,this.enabled=c.enabled,this.id="waypoints"+G++,this.offset=null,this.options=c,b.waypoints[this.axis][this.id]=this,x[this.axis][this.id]=this,d=null==(e=this.element[H])?[]:e,d.push(this.id),this.element[H]=d}return a.prototype.trigger=function(a){if(this.enabled&&(null!=this.callback&&this.callback.apply(this.element,a),this.options.triggerOnce))return this.destroy()},a.prototype.disable=function(){return this.enabled=!1},a.prototype.enable=function(){return this.context.refresh(),this.enabled=!0},a.prototype.destroy=function(){return delete x[this.axis][this.id],delete this.context.waypoints[this.axis][this.id],this.context.checkEmpty()},a.getWaypointsByElement=function(a){var b,c;return(c=a[H],!c)?[]:(b=j.extend({},x.horizontal,x.vertical),j.map(c,function(a){return b[a]}))},a}(),D={init:function(a,b){var c;return b=j.extend({},j.fn[I].defaults,b),null==(c=b.handler)&&(b.handler=a),this.each(function(){var a,c,d,e;return a=j(this),d=null==(e=b.context)?j.fn[I].defaults.context:e,j.isWindow(d)||(d=a.closest(d)),d=j(d),c=A[d[0][z]],c||(c=new n(d)),new q(a,c,b)}),j[J]("refresh"),this},disable:function(){return D._invoke.call(this,"disable")},enable:function(){return D._invoke.call(this,"enable")},destroy:function(){return D._invoke.call(this,"destroy")},prev:function(a,b){return D._traverse.call(this,a,b,function(a,b,c){if(0<b)return a.push(c[b-1])})},next:function(a,b){return D._traverse.call(this,a,b,function(a,b,c){if(b<c.length-1)return a.push(c[b+1])})},_traverse:function(a,b,c){var d,f;return null==a&&(a="vertical"),null==b&&(b=k),f=C.aggregate(b),d=[],this.each(function(){var b;return b=j.inArray(this,f[a]),c(d,b,f[a])}),this.pushStack(d)},_invoke:function(a){return this.each(function(){var b;return b=q.getWaypointsByElement(this),j.each(b,function(b,c){return c[a](),!0})}),this}},j.fn[I]=function(){var b,c;return c=arguments[0],b=2<=arguments.length?a.call(arguments,1):[],D[c]?D[c].apply(this,b):j.isFunction(c)?D.init.apply(this,arguments):j.isPlainObject(c)?D.init.apply(this,[null,c]):c?j.error("The "+c+" method does not exist in jQuery Waypoints."):j.error("jQuery Waypoints needs a callback function or handler option.")},j.fn[I].defaults={context:k,continuous:!0,enabled:!0,horizontal:!1,offset:0,triggerOnce:!1},C={refresh:function(){return j.each(A,function(a,b){return b.refresh()})},viewportHeight:function(){var a;return null==(a=k.innerHeight)?e.height():a},aggregate:function(a){var b,c,d;return(b=x,a&&(b=null==(d=A[j(a)[0][z]])?void 0:d.waypoints),!b)?[]:(c={horizontal:[],vertical:[]},j.each(c,function(a,d){return j.each(b[a],function(a,b){return d.push(b)}),d.sort(function(a,b){return a.offset-b.offset}),c[a]=j.map(d,function(a){return a.element}),c[a]=j.unique(c[a])}),c)},above:function(a){return null==a&&(a=k),C._filter(a,"vertical",function(a,b){return b.offset<=a.oldScroll.y})},below:function(a){return null==a&&(a=k),C._filter(a,"vertical",function(a,b){return b.offset>a.oldScroll.y})},left:function(a){return null==a&&(a=k),C._filter(a,"horizontal",function(a,b){return b.offset<=a.oldScroll.x})},right:function(a){return null==a&&(a=k),C._filter(a,"horizontal",function(a,b){return b.offset>a.oldScroll.x})},enable:function(){return C._invoke("enable")},disable:function(){return C._invoke("disable")},destroy:function(){return C._invoke("destroy")},extendFn:function(a,b){return D[a]=b},_invoke:function(a){var b;return b=j.extend({},x.vertical,x.horizontal),j.each(b,function(b,c){return c[a](),!0})},_filter:function(a,b,c){var d,f;return(d=A[j(a)[0][z]],!d)?[]:(f=[],j.each(d.waypoints[b],function(a,b){if(c(d,b))return f.push(b)}),f.sort(function(a,b){return a.offset-b.offset}),j.map(f,function(a){return a.element}))}},j[J]=function(){var b,c;return c=arguments[0],b=2<=arguments.length?a.call(arguments,1):[],C[c]?C[c].apply(null,b):C.aggregate.call(null,c)},j[J].settings={resizeThrottle:100,scrollThrottle:30},e.on("load.waypoints",function(){return j[J]("refresh")})})}).call(this);